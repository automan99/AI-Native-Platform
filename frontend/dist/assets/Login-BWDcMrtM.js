import{_ as M,u as V,o,c as l,a as m,b as a,n as _,w as u,v,d as k,e as x,r as c,f as B}from"./index-B70JlMxX.js";import{n}from"./notification-D4aQ7HzA.js";const P={class:"auth-page"},U={class:"auth-container"},N={key:0,class:"login-mode"},z={class:"auth-tabs"},A={key:0,class:"form-container"},G={class:"input-group"},K={class:"input-group"},$=["disabled"],I={key:0},S={key:1,class:"loading-spinner"},T={key:1,class:"gitlab-container"},F=["disabled"],R={key:0},W={key:1},D={class:"auth-footer"},E={key:1,class:"register-mode"},j={class:"form-container"},q={class:"input-group"},H={class:"input-group"},J={class:"input-group"},O={class:"input-group"},Q=["disabled"],X={key:0},Y={key:1,class:"loading-spinner"},Z={class:"auth-footer"},ss={__name:"Login",setup(as){const C=B(),g=V(),h=c(!0),p=c("password"),t=c(!1),i=c({login:"",password:""}),d=c({username:"",email:"",password:"",confirmPassword:""});async function f(){if(!i.value.login||!i.value.password){n.warning("请输入用户名/邮箱和密码");return}t.value=!0;try{const r=await g.loginWithPassword(i.value.login,i.value.password);r.success?C.push("/dashboard"):n.error(r.message||"登录失败")}catch{n.error("登录失败，请稍后重试")}finally{t.value=!1}}async function L(){t.value=!0;try{await g.loginWithGitLab()}catch{n.error("登录失败，请稍后重试"),t.value=!1}}async function y(){const{username:r,email:s,password:e,confirmPassword:b}=d.value;if(!r||!s||!e||!b){n.warning("请填写所有字段");return}if(e!==b){n.warning("两次输入的密码不一致");return}if(e.length<6){n.warning("密码长度至少为6个字符");return}t.value=!0;try{const w=await g.register({username:r,email:s,password:e});w.success?(n.success("注册成功，请登录"),h.value=!0,i.value.login=r,i.value.password=""):n.error(w.message||"注册失败")}catch{n.error("注册失败，请稍后重试")}finally{t.value=!1}}return(r,s)=>(o(),l("div",P,[s[20]||(s[20]=m('<div class="background-layer" data-v-ece54490><div class="sky-gradient" data-v-ece54490></div><div class="stars" data-v-ece54490></div><div class="aurora" data-v-ece54490></div><div class="moon" data-v-ece54490></div><div class="mountains" data-v-ece54490></div><div class="foliage" data-v-ece54490></div></div>',1)),a("div",U,[h.value?(o(),l("div",N,[s[14]||(s[14]=m('<div class="auth-logo" data-v-ece54490><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-ece54490><path d="M12 2L2 7l10 5 10-5-10-5z" data-v-ece54490></path><path d="M2 17l10 5 10-5" data-v-ece54490></path><path d="M2 12l10 5 10-5" data-v-ece54490></path></svg></div><div class="auth-header" data-v-ece54490><h1 class="auth-title" data-v-ece54490>欢迎回来</h1><p class="auth-subtitle" data-v-ece54490>登录以继续使用 AI Native研发平台</p></div>',2)),a("div",z,[a("button",{class:_(["auth-tab",{active:p.value==="password"}]),onClick:s[0]||(s[0]=e=>p.value="password")}," 账号密码 ",2),a("button",{class:_(["auth-tab",{active:p.value==="gitlab"}]),onClick:s[1]||(s[1]=e=>p.value="gitlab")}," GitLab ",2)]),p.value==="password"?(o(),l("div",A,[a("div",G,[u(a("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>i.value.login=e),type:"text",class:"auth-input",placeholder:"邮箱或用户名",onKeyup:k(f,["enter"])},null,544),[[v,i.value.login]])]),a("div",K,[u(a("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>i.value.password=e),type:"password",class:"auth-input",placeholder:"密码",onKeyup:k(f,["enter"])},null,544),[[v,i.value.password]])]),s[11]||(s[11]=a("div",{class:"form-actions"},[a("a",{class:"forgot-link",href:"#"},"忘记密码？")],-1)),a("button",{class:"submit-btn",onClick:f,disabled:t.value},[t.value?(o(),l("span",S,[...s[10]||(s[10]=[a("svg",{viewBox:"0 0 24 24",fill:"none"},[a("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2","stroke-dasharray":"60","stroke-dashoffset":"20"})],-1),x(" 登录中... ",-1)])])):(o(),l("span",I,"登录"))],8,$)])):(o(),l("div",T,[a("button",{class:"gitlab-btn",onClick:L,disabled:t.value},[s[12]||(s[12]=a("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[a("path",{d:"M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 01-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 015 1.8a.43.43 0 01.41 0l2.44 7.51h8.3l2.44-7.51a.43.43 0 01.41 0 .42.42 0 01.33.36l2.44 7.51 1.22 3.78a.84.84 0 01-.3.94z"})],-1)),t.value?(o(),l("span",W,"跳转中...")):(o(),l("span",R,"使用 GitLab 登录"))],8,F)])),s[15]||(s[15]=a("div",{class:"divider"},[a("span",null,"或")],-1)),a("div",D,[s[13]||(s[13]=a("span",null,"还没有账户？",-1)),a("a",{class:"link",onClick:s[4]||(s[4]=e=>h.value=!1)},"立即注册")])])):(o(),l("div",E,[s[18]||(s[18]=m('<div class="auth-logo" data-v-ece54490><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-ece54490><path d="M12 2L2 7l10 5 10-5-10-5z" data-v-ece54490></path><path d="M2 17l10 5 10-5" data-v-ece54490></path><path d="M2 12l10 5 10-5" data-v-ece54490></path></svg></div><div class="auth-header" data-v-ece54490><h1 class="auth-title" data-v-ece54490>创建账户</h1><p class="auth-subtitle" data-v-ece54490>开始使用 AI Native研发平台</p></div>',2)),a("div",j,[a("div",q,[u(a("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>d.value.username=e),type:"text",class:"auth-input",placeholder:"用户名"},null,512),[[v,d.value.username]])]),a("div",H,[u(a("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>d.value.email=e),type:"email",class:"auth-input",placeholder:"邮箱地址"},null,512),[[v,d.value.email]])]),a("div",J,[u(a("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>d.value.password=e),type:"password",class:"auth-input",placeholder:"密码"},null,512),[[v,d.value.password]])]),a("div",O,[u(a("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>d.value.confirmPassword=e),type:"password",class:"auth-input",placeholder:"确认密码",onKeyup:k(y,["enter"])},null,544),[[v,d.value.confirmPassword]])]),a("button",{class:"submit-btn",onClick:y,disabled:t.value},[t.value?(o(),l("span",Y,[...s[16]||(s[16]=[a("svg",{viewBox:"0 0 24 24",fill:"none"},[a("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2","stroke-dasharray":"60","stroke-dashoffset":"20"})],-1),x(" 注册中... ",-1)])])):(o(),l("span",X,"注册"))],8,Q)]),s[19]||(s[19]=a("div",{class:"divider"},[a("span",null,"或")],-1)),a("div",Z,[s[17]||(s[17]=a("span",null,"已有账户？",-1)),a("a",{class:"link",onClick:s[9]||(s[9]=e=>h.value=!0)},"立即登录")])]))])]))}},os=M(ss,[["__scopeId","data-v-ece54490"]]);export{os as default};
