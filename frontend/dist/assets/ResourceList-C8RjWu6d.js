import{_ as R,g as F,o as r,c as l,b as e,t as c,w as I,v as K,d as j,h as k,F as V,m as T,n as H,p as q,q as A,e as C,s as n,r as d,x as y,z as E,f as O}from"./index-B70JlMxX.js";import{r as U}from"./resources-kY_Hbd4z.js";const Z={class:"resource-list-page"},G={class:"stats-bar"},J={class:"stats-info"},Q={class:"stats-count"},W={class:"search-bar"},X=["placeholder"],Y={class:"resource-grid"},ee={key:0,class:"empty-state"},oe=["onClick"],te={class:"card-header"},se={class:"card-version"},re={class:"card-name"},ne={class:"card-desc"},le={class:"card-meta"},ae={key:0,class:"card-author"},ce={class:"card-stats"},ie={class:"stat-item"},de={class:"stat-item"},ue={key:0,class:"pagination"},ve=["disabled"],pe={class:"page-numbers"},he=["onClick"],ke=["disabled"],fe={render(){return n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[n("path",{d:"M12 2L15 8L21 9L17 14L18 20L12 17L6 20L7 14L3 9L9 8L12 2Z"})])}},_e={render(){return n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[n("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),n("circle",{cx:"12",cy:"12",r:"4"}),n("path",{d:"M12 2V4M12 20V22M2 12H4M20 12H22"})])}},ge={render(){return n("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[n("path",{d:"M9 18C5.68629 18 3 15.3137 3 12C3 8.68629 5.68629 6 9 6"}),n("path",{d:"M15 6C18.3137 6 21 8.68629 21 12C21 15.3137 18.3137 18 15 18"}),n("circle",{cx:"15",cy:"12",r:"3"}),n("circle",{cx:"9",cy:"12",r:"3"})])}},we={components:{SkillIcon:fe,McpIcon:_e,HookIcon:ge}},Ce=Object.assign(we,{__name:"ResourceList",props:{resourceType:{type:String,default:""}},setup(x){const M=x,$=O(),f=d([]),p=d(0),a=d(1),m=d(20),u=d(""),h=d(!1),L={skill:{title:"Skill",color:"#3b82f6",icon:"SkillIcon"},mcp:{title:"MCP",color:"#10b981",icon:"McpIcon"},hook:{title:"Hook",color:"#8b5cf6",icon:"HookIcon"}},b=y(()=>L[M.resourceType]||L.skill),_=y(()=>Math.ceil(p.value/m.value)),D=y(()=>{const s=[];let i=Math.max(1,a.value-Math.floor(2.5)),t=Math.min(_.value,i+5-1);t-i<4&&(i=Math.max(1,t-5+1));for(let v=i;v<=t;v++)s.push(v);return s});F(()=>{g()});function g(){h.value=!0,U.getList({type:M.resourceType,keyword:u.value,page:a.value,page_size:m.value}).then(s=>{s.success&&(f.value=s.data,p.value=s.total)}).catch(s=>{console.error("Failed to load resources:",s)}).finally(()=>{h.value=!1})}function S(){a.value=1,g()}function P(){u.value="",S()}function w(s){s<1||s>_.value||(a.value=s,g(),window.scrollTo({top:0,behavior:"smooth"}))}function B(s){return s?s.toLocaleString():"0"}function z(s){$.push(`/resource/${s}`)}function N(s){return{skill:"SkillIcon",mcp:"McpIcon",hook:"HookIcon"}[s]||"SkillIcon"}return(s,o)=>{const i=E("loading");return r(),l("div",Z,[e("div",G,[e("div",J,[o[3]||(o[3]=e("span",{class:"stats-label"},"总计",-1)),e("span",Q,c(p.value)+" 个资源",1)])]),e("div",W,[o[5]||(o[5]=e("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"M21 21L16.65 16.65"})],-1)),I(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>u.value=t),type:"text",class:"search-input",placeholder:`搜索${b.value.title}名称、描述...`,onKeyup:j(S,["enter"])},null,40,X),[[K,u.value]]),u.value?(r(),l("button",{key:0,class:"search-clear",onClick:P},[...o[4]||(o[4]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M18 6L6 18M6 6L18 18"})],-1)])])):k("",!0)]),I((r(),l("div",Y,[f.value.length===0&&!h.value?(r(),l("div",ee,[o[6]||(o[6]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M12 8V12L15 15"})],-1)),e("p",null,"暂无"+c(b.value.title),1)])):k("",!0),(r(!0),l(V,null,T(f.value,t=>(r(),l("div",{key:t.id,class:"resource-card",onClick:v=>z(t.id)},[e("div",te,[e("div",{class:H(["card-icon",`type-${x.resourceType}`])},[(r(),q(A(N(t.type))))],2),e("div",se,c(t.version||"v1.0.0"),1)]),e("h3",re,c(t.name),1),e("p",ne,c(t.description||"暂无描述"),1),e("div",le,[t.author?(r(),l("span",ae,[o[7]||(o[7]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M20 21V19C20 17.9391 19 17.9217 18.8284 16.1716C18.0783 15.24 3 8.68629 3 12C3 8.68629 5.68629 6 9 6"})],-1)),C(" "+c(t.author),1)])):k("",!0),e("div",ce,[e("span",ie,[o[8]||(o[8]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1)),C(" "+c(B(t.view_count)),1)]),e("span",de,[o[9]||(o[9]=e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"}),e("path",{d:"M7 10L12 15L17 10M12 15V3"})],-1)),C(" "+c(B(t.install_count)),1)])])])],8,oe))),128))])),[[i,h.value]]),p.value>0?(r(),l("div",ue,[e("button",{class:"page-btn",disabled:a.value===1,onClick:o[1]||(o[1]=t=>w(a.value-1))},[...o[10]||(o[10]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M15 18L9 12L15 6"})],-1)])],8,ve),e("div",pe,[(r(!0),l(V,null,T(D.value,t=>(r(),l("button",{key:t,class:H(["page-num",{active:t===a.value}]),onClick:v=>w(t)},c(t),11,he))),128))]),e("button",{class:"page-btn",disabled:a.value===_.value,onClick:o[2]||(o[2]=t=>w(a.value+1))},[...o[11]||(o[11]=[e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M9 18L15 12L9 6"})],-1)])],8,ke)])):k("",!0)])}}}),Me=R(Ce,[["__scopeId","data-v-a56a8a24"]]);export{Me as default};
