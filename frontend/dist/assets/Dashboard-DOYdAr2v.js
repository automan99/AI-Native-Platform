import{j as x,_ as K,g as P,o as r,c as a,b as s,w as j,v as Z,d as q,h as E,t as n,a as I,e as _,k as A,l as H,F as L,m,n as g,p as M,q as B,s as l,r as u,x as N,y as G,f as J}from"./index-B70JlMxX.js";import{r as Q}from"./resources-kY_Hbd4z.js";const $={getOverview(){return x.get("/stats/overview")},getTop(h){return x.get("/stats/top",{params:h})},getLatest(h){return x.get("/stats/latest",{params:h})}},W={class:"homepage"},X={class:"search-section"},Y={class:"search-container"},ss={class:"search-box"},es={class:"stats-tags"},ts={class:"stat-value"},os={class:"stat-value"},rs={class:"stat-value"},as={class:"stat-tag stat-tag-secondary"},ns={class:"stat-value"},ls={class:"stat-tag stat-tag-secondary"},cs={class:"stat-value"},is={key:0,class:"resources-section"},ds={class:"content-grid"},us={class:"resource-section"},vs={class:"section-header"},ps={key:0,class:"empty-state"},hs={key:1,class:"resource-list"},ks=["onClick"],ys={class:"resource-info"},_s={class:"resource-name"},gs={class:"resource-meta"},fs={class:"resource-type"},ws={class:"resource-section"},Cs={class:"section-header"},bs={key:0,class:"empty-state"},xs={key:1,class:"resource-list"},Ls=["onClick"],ms={class:"resource-info"},Ms={class:"resource-name"},Bs={class:"resource-meta"},$s={class:"resource-type"},Ss={key:1,class:"search-results"},Ds={class:"search-results-header"},Is={key:0,class:"empty-state"},As={key:1,class:"resource-list"},Hs=["onClick"],Ns={class:"resource-info"},Ts={class:"resource-name"},Vs={class:"resource-meta"},Rs={class:"resource-type"},zs={render(){return l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[l("path",{d:"M12 2L15 8L21 9L17 14L18 20L12 17L6 20L7 14L3 9L9 8L12 2Z"})])}},Fs={render(){return l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[l("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),l("circle",{cx:"12",cy:"12",r:"4"})])}},Os={render(){return l("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[l("path",{d:"M9 18C5.68629 18 3 15.3137 3 12C3 8.68629 5.68629 6 9 6"}),l("path",{d:"M15 6C18.3137 6 21 8.68629 21 12C21 15.3137 18.3137 18 15 18"}),l("circle",{cx:"15",cy:"12",r:"3"}),l("circle",{cx:"9",cy:"12",r:"3"})])}},Us={components:{SkillIcon:zs,McpIcon:Fs,HookIcon:Os}},Ks=Object.assign(Us,{__name:"Dashboard",setup(h){const T=J(),k=u({}),v=u([]),p=u([]),i=u(""),y=u([]),f=u(!1),V=N(()=>[...v.value,...p.value].reduce((t,e)=>t+(e.view_count||0),0)),R=N(()=>[...v.value,...p.value].reduce((t,e)=>t+(e.install_count||0),0));P(()=>{z(),F(),O()});async function z(){try{const t=await $.getOverview();t.success&&(k.value=t.data)}catch(t){console.error("Failed to load overview:",t)}}async function F(){try{const t=await $.getTop({limit:8});t.success&&(v.value=t.data)}catch(t){console.error("Failed to load top resources:",t)}}async function O(){try{const t=await $.getLatest({limit:8});t.success&&(p.value=t.data)}catch(t){console.error("Failed to load latest resources:",t)}}async function S(){if(i.value.trim()){f.value=!0;try{const t=await Q.getList({keyword:i.value,page:1,page_size:20});t.success&&(y.value=t.data)}catch(t){console.error("Search failed:",t)}}}function D(){i.value="",y.value=[],f.value=!1}function d(t){return t?t.toLocaleString():"0"}function U(t){if(!t)return"-";const e=new Date(t),o=new Date-e,c=Math.floor(o/(1e3*60*60*24));return c===0?"今天":c===1?"昨天":c<7?`${c}天前`:e.toLocaleDateString("zh-CN")}function w(t){T.push(`/resource/${t}`)}function C(t){return{skill:"SkillIcon",mcp:"McpIcon",hook:"HookIcon"}[t]||"SkillIcon"}return(t,e)=>{const b=G("router-link");return r(),a("div",W,[s("div",X,[e[14]||(e[14]=s("div",{class:"tagline"},[s("span",{class:"tagline-main"},"发现与管理 AI Agent 资源"),s("span",{class:"tagline-sub"},"Skills · MCP · Hooks")],-1)),s("div",Y,[s("div",ss,[e[5]||(e[5]=s("svg",{class:"search-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("circle",{cx:"11",cy:"11",r:"8"}),s("path",{d:"M21 21L16.65 16.65"})],-1)),j(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),type:"text",class:"search-input",placeholder:"搜索 Skills、MCP、Hooks...",onKeyup:q(S,["enter"])},null,544),[[Z,i.value]]),i.value?(r(),a("button",{key:0,class:"clear-btn",onClick:D},[...e[4]||(e[4]=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("path",{d:"M18 6L6 18M6 6L18 18"})],-1)])])):E("",!0),s("button",{class:"search-btn",onClick:S}," 搜索 ")])]),s("div",es,[s("div",{class:"stat-tag",onClick:e[1]||(e[1]=o=>t.$router.push("/skills"))},[e[6]||(e[6]=s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("path",{d:"M12 2L15 8L21 9L17 14L18 20L12 17L6 20L7 14L3 9L9 8L12 2Z"})],-1)),e[7]||(e[7]=s("span",{class:"stat-label"},"Skills",-1)),s("span",ts,n(d(k.value.total_skills)),1)]),s("div",{class:"stat-tag",onClick:e[2]||(e[2]=o=>t.$router.push("/mcp"))},[e[8]||(e[8]=s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),s("circle",{cx:"12",cy:"12",r:"4"})],-1)),e[9]||(e[9]=s("span",{class:"stat-label"},"MCP",-1)),s("span",os,n(d(k.value.total_mcps)),1)]),s("div",{class:"stat-tag",onClick:e[3]||(e[3]=o=>t.$router.push("/hooks"))},[e[10]||(e[10]=I('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-bd45edb0><path d="M9 18C5.68629 18 3 15.3137 3 12C3 8.68629 5.68629 6 9 6" data-v-bd45edb0></path><path d="M15 6C18.3137 6 21 8.68629 21 12C21 15.3137 18.3137 18 15 18" data-v-bd45edb0></path><circle cx="15" cy="12" r="3" data-v-bd45edb0></circle><circle cx="9" cy="12" r="3" data-v-bd45edb0></circle></svg><span class="stat-label" data-v-bd45edb0>Hooks</span>',2)),s("span",rs,n(d(k.value.total_hooks)),1)]),s("div",as,[e[11]||(e[11]=s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("path",{d:"M12 6v6l4 2"})],-1)),e[12]||(e[12]=s("span",{class:"stat-label"},"总浏览",-1)),s("span",ns,n(d(V.value)),1)]),s("div",ls,[e[13]||(e[13]=I('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-bd45edb0><path d="M21 15v4c0 .5304-.2107 1.0391-.5858 1.4142-.3905.3752-.8787.5858-1.4142.5858H5c-.5304 0-1.0391-.2107-1.4142-.5858C3.2107 17.0391 3 16.5304 3 16v-4" data-v-bd45edb0></path><path d="M7 10l5 5 5-5" data-v-bd45edb0></path><path d="M12 3v12" data-v-bd45edb0></path></svg><span class="stat-label" data-v-bd45edb0>总下载</span>',2)),s("span",cs,n(d(R.value)),1)])])]),f.value?(r(),a("div",Ss,[s("div",Ds,[s("span",null,'搜索 "'+n(i.value)+'" 的结果',1),s("button",{class:"clear-search-btn",onClick:D},"清除搜索")]),y.value.length===0?(r(),a("div",Is,[...e[23]||(e[23]=[s("p",null,"未找到相关资源",-1)])])):(r(),a("div",As,[(r(!0),a(L,null,m(y.value,o=>(r(),a("div",{key:o.id,class:"resource-item",onClick:c=>w(o.id)},[s("div",{class:g(["resource-icon",`type-${o.type}`])},[(r(),M(B(C(o.type))))],2),s("div",Ns,[s("div",Ts,n(o.name),1),s("div",Vs,[s("span",Rs,n(o.type.toUpperCase()),1),e[24]||(e[24]=s("span",{class:"resource-dot"},"·",-1)),s("span",null,n(d(o.install_count))+" 安装",1)])])],8,Hs))),128))]))])):(r(),a("div",is,[s("div",ds,[s("div",us,[s("div",vs,[e[16]||(e[16]=s("h3",{class:"section-title"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("path",{d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),s("path",{d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]),_(" 热门资源 ")],-1)),A(b,{to:"/skills",class:"section-more"},{default:H(()=>[...e[15]||(e[15]=[_("查看全部",-1)])]),_:1})]),v.value.length===0?(r(),a("div",ps,[...e[17]||(e[17]=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("path",{d:"M12 8v4l3 3"})],-1),s("p",null,"暂无数据",-1)])])):(r(),a("div",hs,[(r(!0),a(L,null,m(v.value,(o,c)=>(r(),a("div",{key:o.id,class:"resource-item",onClick:Ps=>w(o.id)},[s("span",{class:g(["resource-rank",`rank-${Math.min(c+1,3)}`])},n(c+1),3),s("div",{class:g(["resource-icon",`type-${o.type}`])},[(r(),M(B(C(o.type))))],2),s("div",ys,[s("div",_s,n(o.name),1),s("div",gs,[s("span",fs,n(o.type.toUpperCase()),1),e[18]||(e[18]=s("span",{class:"resource-dot"},"·",-1)),s("span",null,n(d(o.install_count))+" 安装",1)])])],8,ks))),128))]))]),s("div",ws,[s("div",Cs,[e[20]||(e[20]=s("h3",{class:"section-title"},[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("path",{d:"M12 6v6l4 2"})]),_(" 最新资源 ")],-1)),A(b,{to:"/skills",class:"section-more"},{default:H(()=>[...e[19]||(e[19]=[_("查看全部",-1)])]),_:1})]),p.value.length===0?(r(),a("div",bs,[...e[21]||(e[21]=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[s("circle",{cx:"12",cy:"12",r:"10"}),s("path",{d:"M12 8v4l3 3"})],-1),s("p",null,"暂无数据",-1)])])):(r(),a("div",xs,[(r(!0),a(L,null,m(p.value,o=>(r(),a("div",{key:o.id,class:"resource-item",onClick:c=>w(o.id)},[s("div",{class:g(["resource-icon",`type-${o.type}`])},[(r(),M(B(C(o.type))))],2),s("div",ms,[s("div",Ms,n(o.name),1),s("div",Bs,[s("span",$s,n(o.type.toUpperCase()),1),e[22]||(e[22]=s("span",{class:"resource-dot"},"·",-1)),s("span",null,n(U(o.created_at)),1)])])],8,Ls))),128))]))])])]))])}}}),qs=K(Ks,[["__scopeId","data-v-bd45edb0"]]);export{qs as default};
